import{r as t,j as e}from"./react-vendor-CkISVyWX.js";import{g as j}from"./index-DrCt6cL8.js";import{z as b,I as w,X as g,J as v,K as y}from"./lucide-icons-DSJFtPXY.js";import"./vendor-Bb8JjhAW.js";import"./google-genai-BER3QIUg.js";const z=()=>{const[n,i]=t.useState(!1),[l,c]=t.useState([{role:"model",text:"مرحباً بك في شركة الإسناد للاستشارات. كيف يمكنني مساعدتك في تطوير أعمالك أو تنظيم شؤونك المالية اليوم؟"}]),[o,d]=t.useState(""),[x,m]=t.useState(!1),[N,f]=t.useState(!1),u=t.useRef(null),h=()=>{var s;(s=u.current)==null||s.scrollIntoView({behavior:"smooth"})};t.useEffect(()=>{h()},[l]);const p=async()=>{if(!o.trim()||x)return;const s=o.trim();c(a=>[...a,{role:"user",text:s}]),d(""),m(!0);try{const a=await j(s,l.map(r=>({role:r.role,parts:[{text:r.text}]})));c(r=>[...r,{role:"model",text:a||"نعتذر عن عدم الاستجابة حالياً."}])}catch{f(!0)}finally{m(!1)}};return e.jsxs(e.Fragment,{children:[!n&&e.jsxs("button",{onClick:()=>i(!0),className:"fixed bottom-6 left-6 p-5 bg-sky-600 text-white rounded-full shadow-2xl hover:scale-110 transition-all z-40 flex items-center gap-3 group",children:[e.jsx("span",{className:"max-w-0 overflow-hidden group-hover:max-w-xs transition-all duration-500 whitespace-nowrap font-bold",children:"مستشار الإسناد الذكي"}),e.jsx(b,{className:"w-6 h-6"})]}),n&&e.jsxs("div",{className:"fixed bottom-6 left-6 w-[90vw] md:w-[450px] h-[650px] bg-slate-900 border border-slate-800 rounded-[2.5rem] shadow-2xl flex flex-col z-50 overflow-hidden animate-in zoom-in duration-300",children:[e.jsxs("div",{className:"bg-gradient-to-r from-sky-700 to-blue-700 p-6 flex justify-between items-center text-white",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(w,{className:"w-6 h-6"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:"المستشار الذكي"}),e.jsx("p",{className:"text-xs opacity-70",children:"شركة الإسناد للاستشارات"})]})]}),e.jsx("button",{onClick:()=>i(!1),children:e.jsx(g,{})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-6 bg-slate-950",children:[l.map((s,a)=>e.jsx("div",{className:`flex ${s.role==="user"?"justify-start":"justify-end"}`,children:e.jsx("div",{className:`max-w-[85%] p-4 rounded-3xl ${s.role==="user"?"bg-sky-600 text-white":"bg-slate-800 text-slate-200"}`,children:e.jsx("p",{className:"text-sm",children:s.text})})},a)),x&&e.jsx(v,{className:"animate-spin text-sky-500 mx-auto"}),e.jsx("div",{ref:u})]}),e.jsx("div",{className:"p-6 bg-slate-900",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:o,onChange:s=>d(s.target.value),onKeyPress:s=>s.key==="Enter"&&p(),placeholder:"اسأل عن خدماتنا...",className:"w-full pl-12 pr-5 py-4 bg-slate-800 border border-slate-700 rounded-2xl text-white outline-none focus:border-sky-500 transition-all"}),e.jsx("button",{onClick:p,className:"absolute left-3 top-1/2 -translate-y-1/2 text-sky-500",children:e.jsx(y,{})})]})})]})]})};export{z as default};
